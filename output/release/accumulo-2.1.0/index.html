<!DOCTYPE html>
<html lang="en">
<head>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" integrity="sha384-awusxf8AUojygHf2+joICySzB780jVvQaVCAt1clU3QsyAitLGul28Qxb2r1e5g+" crossorigin="anonymous">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs/jq-2.2.3/dt-1.10.12/datatables.min.css">
<link href="/css/accumulo.css" rel="stylesheet" type="text/css">

<title>Apache Accumulo 2.1.0</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/bs/jq-2.2.3/dt-1.10.12/datatables.min.js"></script>
<script>
  // show location of canonical site if not currently on the canonical site
  $(function() {
    var host = window.location.host;
    if (typeof host !== 'undefined' && host !== 'accumulo.apache.org') {
      $('#non-canonical').show();
    }
  });

  $(function() {
    // decorate section headers with anchors
    return $("h2, h3, h4, h5, h6").each(function(i, el) {
      var $el, icon, id;
      $el = $(el);
      id = $el.attr('id');
      icon = '<i class="fa fa-link"></i>';
      if (id) {
        return $el.append($("<a />").addClass("header-link").attr("href", "#" + id).html(icon));
      }
    });
  });

  // fix sidebar width in documentation
  $(function() {
    var $affixElement = $('div[data-spy="affix"]');
    $affixElement.width($affixElement.parent().width());
  });
</script>

</head>
<body style="padding-top: 100px">

  <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-items">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/"><img id="nav-logo" alt="Apache Accumulo" class="img-responsive" src="/images/accumulo-logo.png" width="200"
        /></a>
    </div>
    <div class="collapse navbar-collapse" id="navbar-items">
      <ul class="nav navbar-nav">
        <li class="nav-link"><a href="/downloads">Download</a></li>
        <li class="nav-link"><a href="/tour">Tour</a></li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">Releases<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/release/accumulo-2.0.1/">2.0.1 (Latest)</a></li>
            <li><a href="/release/accumulo-1.10.1/">1.10.1</a></li>
            <li><a href="/release/">Archive</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">Documentation<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/docs/2.x">User Manual (2.x)</a></li>
            <li><a href="/docs/2.x/apidocs">Javadocs (2.0)</a></li>
            <li><a href="/quickstart-1.x">Quickstart (1.x)</a></li>
            <li><a href="/accumulo2-maven-plugin">Accumulo Maven Plugin</a></li>
            <li><a href="/1.10/accumulo_user_manual.html">User Manual (1.10)</a></li>
            <li><a href="/1.10/apidocs">Javadocs (1.10)</a></li>
            <li><a href="/external-docs">External Docs</a></li>
            <li><a href="/docs-archive/">Archive</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">Community<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/contact-us">Contact Us</a></li>
            <li><a href="/how-to-contribute">How To Contribute</a></li>
            <li><a href="/people">People</a></li>
            <li><a href="/related-projects">Related Projects</a></li>
          </ul>
        </li>
        <li class="nav-link"><a href="/search">Search</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#"><img alt="Apache Software Foundation" src="https://www.apache.org/foundation/press/kit/feather.svg" width="15"/><span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="https://www.apache.org">Apache Homepage <i class="fa fa-external-link"></i></a></li>
            <li><a href="https://www.apache.org/licenses/">License <i class="fa fa-external-link"></i></a></li>
            <li><a href="https://www.apache.org/foundation/sponsorship">Sponsorship <i class="fa fa-external-link"></i></a></li>
            <li><a href="https://www.apache.org/security">Security <i class="fa fa-external-link"></i></a></li>
            <li><a href="https://www.apache.org/foundation/thanks">Thanks <i class="fa fa-external-link"></i></a></li>
            <li><a href="https://www.apache.org/foundation/policies/conduct">Code of Conduct <i class="fa fa-external-link"></i></a></li>
            <li><a href="https://www.apache.org/events/current-event.html">Current Event <i class="fa fa-external-link"></i></a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <div class="container">
    <div class="row">
      <div class="col-md-12">

        <div id="non-canonical" style="display: none; background-color: #F0E68C; padding-left: 1em;">
          Visit the official site at: <a href="https://accumulo.apache.org">https://accumulo.apache.org</a>
        </div>
        <div id="content">
          
          <h1 class="title">Apache Accumulo 2.1.0</h1>
          
          

<p>19 Jan 2020</p>
<nav aria-label="Navigate Release Notes"><ul class="pager">
      
    
      
        <li class="next"><a href="/release/accumulo-1.3.5-incubating/">Apache Accumulo 1.3.5-incubating&nbsp;&raquo;</a></li>
      
    </ul></nav>


<div class="alert alert-danger" style="margin-bottom: 0px;" role="alert">
  <p>These are <strong>draft</strong> release notes for a future release of Accumulo!</p>
  <p>Please view <a class="alert-link" href="/release/accumulo-2.0.1/">the latest release notes</a>.</p>
</div>



<div class="alert alert-warning" role="alert">
  <p>This version is not a <a class="alert-link" href="/contributor/versioning#LTM">Long Term Maintenance (non-LTM)</a></strong> release.</p>
</div>


<p>** DRAFT RELEASE NOTES **</p>

<h2 id="notable-changes">Notable Changes</h2>

<h3 id="compaction-changes">Compaction Changes</h3>

<p>Significant changes were made to how Accumulo compacts files in this release.  See 
<a href="/docs/2.x/administration/compaction">compaction </a> for details, below are some highlights.</p>

<ul>
  <li>Multiple concurrent compactions per tablet on disjoint files is now
supported.  Previously only a single compaction could run on a tablet.  This
allows tablets that are running long compactions on large files to
concurrently compact new smaller files that arrive.</li>
  <li>Multiple compaction thread pools per tablet server are now supported.
Previously only a single thread pool existed within a tablet server for
compactions.  With a single thread pool, if all threads are working on long
compactions it can starve quick compactions.  Now compactions with little
data can be processed by dedicated thread pools.</li>
  <li>Accumuloâ€™s default algorithm for selecting files to compact was modified to
select the smallest set of files that meet the compaction ratio criteria
instead of the largest set.  This change makes tablets more aggressive about
reducing their number files while still doing logarithmic compaction work.
This change also enables efficiently compacting new small files that arrive
during a long running compaction.</li>
  <li>Having dedicated compaction threads pools for tables is now supported
through configuration.  The default configuration for Accumulo sets up
dedicated thread pools for compacting the Accumulo metadata table.</li>
  <li>Merging minor compactions were dropped.  These were added to Accumulo to
address the problem of new files arriving while a long running compaction
was running.  Merging minor compactions could cause O(N^2) compaction work.
The new compaction changes in this release can satisfy this use case while
doing a logarithmic amount of work.</li>
</ul>

<p>CompactionStrategy was deprecated in favor of new public APIs.
See its <a href="https://static.javadoc.io/org.apache.accumulo/accumulo-tserver/2.0.1/org/apache/accumulo/tserver/compaction/CompactionStrategy.html">javadoc</a> 
for more information.</p>

<h3 id="fixed-gc-metadata-hotspots">Fixed GC Metadata hotspots</h3>

<p>Prior to this release, Accumulo stored GC file candidates in the metadata table
using rows of the form <code class="language-plaintext highlighter-rouge">~del&lt;URI&gt;</code>. This row schema lead to uneven load on
the metadata table and metadata tablets that were eventually never used. In <a href="https://github.com/apache/accumulo/issues/1043">#1043</a> the row format was changed to <code class="language-plaintext highlighter-rouge">~del&lt;hash(URI)&gt;&lt;URI&gt;</code> resulting in
even load on the metadata table and even data spread in the tablets. After
upgrading, there may still be splits in the metadata table using the old row
format. These splits can be merged away as shown in the example below which
starts off with splits generated from the old and new row schema. The old
splits with the prefix <code class="language-plaintext highlighter-rouge">~delhdfs</code> are merged away.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@uno&gt; getsplits -t accumulo.metadata 
2&lt;
~
~del55
~dela7
~delhdfs://localhost:8020/accumulo/tables/2/default_tablet/F00000a0.rf
~delhdfs://localhost:8020/accumulo/tables/2/default_tablet/F00000kb.rf
root@uno&gt; merge -t accumulo.metadata -b ~delhdfs -e ~delhdfs~
root@uno&gt; getsplits -t accumulo.metadata 
2&lt;
~
~del55
~dela7
</code></pre></div></div>



<hr>

<p><strong>View all releases in the <a href="/release/">archive</a></strong></p>
<nav aria-label="Navigate Release Notes"><ul class="pager">
      
    
      
        <li class="next"><a href="/release/accumulo-1.3.5-incubating/">Apache Accumulo 1.3.5-incubating&nbsp;&raquo;</a></li>
      
    </ul></nav>

        </div>

        
<footer>

  <p><a href="https://www.apache.org/foundation/contributing"><img src="https://www.apache.org/images/SupportApache-small.png" alt="Support the ASF" id="asf-logo" height="100" /></a></p>

  <p>Copyright Â© 2011-2021 <a href="https://www.apache.org">TheÂ ApacheÂ SoftwareÂ Foundation</a>.
Licensed under the <a href="https://www.apache.org/licenses/">ApacheÂ License,Â VersionÂ 2.0</a>.</p>

  <p>ApacheÂ®, the names of Apache projects and their logos, and the multicolor feather
logo are registered trademarks or trademarks of The Apache Software Foundation
in the United States and/or other countries.</p>

</footer>


      </div>
    </div>
  </div>
</body>
</html>
